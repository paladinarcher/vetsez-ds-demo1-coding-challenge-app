<div class="container">
  <h3>PM Weekly Summaries Filter</h3>
  <div class="w-50">
    <%= form_tag project_mgr_summaries_path, method: :post do %>
        <div class="form-group">
        <label for="project_title">Project Title:</label>
        <%= select_tag "project_title", options_from_collection_for_select(@project_titles, :timesheet_cell_project_title, :timesheet_cell_project_title),  {:class => 'form-control'}  %>
      </div>
      <div class="form-group">
        <label for="task_name">Task Name:</label>
        <%= select_tag "task_name", options_for_select(select_options_concat_key(@task_names, '|', '--- All Tasks ---', :timesheet_cell_project_title, :timesheet_cell_task_name)), {:class => 'form-control'} %>
      </div>
      <div class="form-group">
        <label for="week_start_date">Week Start/End:</label>
        <%= select_tag "week_start_date", options_for_select(@wsd_options), {:class => 'form-control'} %>
      </div>
      <%= submit_tag("Retrieve Weekly Summaries", :id => "button", :class => "btn btn-primary", :name => "submit") %>
    <% end %>
  </div>
  <hr>
  <br>
  <% if @summaries %>
    <h3>Weekly Summary Results</h3>
    <%= @summaries.as_json %>

    <table class="table" style="width: fit-content">
      <thead class="thead-light">
      <tr>
        <th>Person Email</th>
        <th>Weekly Summary</th>
        <th>Blockers</th>
        <th>Next Planned Activity</th>
      </tr>
      </thead>
      <tbody>
      <% @summaries.each do |summary| %>
        <tr>
          <td><%= summary.person_email_id %></td>
          <td><%= summary.weekly_summary_comment.html_safe %></td>
          <td><%= summary.blockers%></td>
          <td><%= summary.next_planned_activity%></td>
        </tr>
      <% end %>
      </tbody>
    </table>
    <% end %>
    </div>
